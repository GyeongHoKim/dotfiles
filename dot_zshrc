# Load local env
[ -f ~/.env.local ] && . ~/.env.local

# Homebrew PATH (macOS)
if [[ "$OSTYPE" == "darwin"* ]]; then
  if [[ -f "/opt/homebrew/bin/brew" ]]; then
    eval "$(/opt/homebrew/bin/brew shellenv)"
  elif [[ -f "/usr/local/bin/brew" ]]; then
    eval "$(/usr/local/bin/brew shellenv)"
  fi
fi

export ZSH="$HOME/.oh-my-zsh"
ZSH_THEME="fino-time"
plugins=(git z)
source $ZSH/oh-my-zsh.sh

export EDITOR=nvim

export PATH=$PATH:$HOME/bin
export PATH=$PATH:$HOME/.cargo/bin
export PATH="$HOME/.scripts/bin:$PATH"
export PATH="$HOME/.local/bin:$PATH"

# Add mise bin to PATH if mise is installed
if [ -d "$HOME/.mise/bin" ] && ! [[ "$PATH" =~ "$HOME/.mise/bin:" ]]; then
    PATH="$HOME/.mise/bin:$PATH"
fi


eval "$(mise activate zsh)"

alias task=go-task
alias v=nvim
alias k=kubectl

# Alacritty alias for macOS (ensures new window)
if [[ "$OSTYPE" == "darwin"* ]] && command -v alacritty &> /dev/null; then
  alias alacritty="open -a Alacritty --new"
fi

# GPG
export GPG_TTY=$(tty)
if ! pgrep -x -u "${USER}" gpg-agent >/dev/null 2>&1; then
  gpgconf --launch gpg-agent
fi

eval "$(zoxide init zsh)"
