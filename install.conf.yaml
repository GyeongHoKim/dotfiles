- defaults:
    link:
      relink: true
      create: true

- clean: ['~']

# Platform-specific linking
- link:
    # Unix systems
    ~/.zshrc:
      path: zsh/.zshrc
      if: '[ ! "$OS" = "Windows_NT" ]'
    ~/.config/nvim:
      path: nvim/.config/nvim
      if: '[ ! "$OS" = "Windows_NT" ]'
    ~/.config/mcphub:
      path: nvim/.config/mcphub
      if: '[ ! "$OS" = "Windows_NT" ]'

# Shell commands for Unix systems only
- shell:
    - command: ./setup-lazyvim.sh
      description: Setup LazyVim prerequisites
      stdout: true
      stderr: true
      if: '[ ! "$OS" = "Windows_NT" ]'
    - command: ./setup-zsh.sh
      description: Setup Oh My Zsh and plugins
      stdout: true
      stderr: true
      if: '[ ! "$OS" = "Windows_NT" ]'
    - command: ./setup-nvm.sh
      description: Setup Node Version Manager
      stdout: true
      stderr: true
      if: '[ ! "$OS" = "Windows_NT" ]'
    - command: source ~/.zshrc || true
      description: Source zsh configuration
      stdout: true
      stderr: true
      if: '[ ! "$OS" = "Windows_NT" ]'
    
    # Windows detection message
    - command: |
        if [ "$OS" = "Windows_NT" ]; then
          echo "Windows detected! Please run install.bat or install.ps1 instead."
          exit 1
        fi
      description: Check for Windows
      stdout: true
      stderr: true
